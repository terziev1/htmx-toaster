class ToasterComponent extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.toasts=[],this.touchStartX=0,this.touchEndX=0,this.currentToast=null,this.isDragging=!1,this.dragThreshold=10,this.initializeEventListener(),this.initializeContainer()}initializeContainer(){var t=document.createElement("div");t.classList.add("toaster"),this.shadowRoot.appendChild(t)}generateTheme(){var t=document.querySelector("script[data-htmxt-colors]")?.getAttribute("data-htmxt-colors")||null;if(t){t=t.split(";");let o=["#f2f2f2","#000","#e2f9ec","#e6f1fb","#f8e3e3"];var[t,e,s,a,r]=t.map((t,e)=>t||o[e]);return`.toaster {--bg:${t};--txt:${e};--sc:${s};--in:${a};--er:${r};}`}}initializeEventListener(){document.body.addEventListener("HXToast",t=>{var e=t.detail.body;e&&this.addToast(e,t.detail.type||"default")}),document.body.addEventListener("htmx:afterRequest",t=>{var e=t.detail.xhr.getResponseHeader("HXToaster-Body");e&&this.addToast(e,t.detail.xhr.getResponseHeader("HXToaster-Type")||"default")})}addToast(t,e){var o=Math.random().toString(36).substr(2,9);return 2==this.toasts.length&&this.removeToast(this.toasts[this.toasts.length-1].id),this.toasts.unshift({id:o,body:t,type:e}),this.renderToast(o),o}removeToast(e){var o=this.toasts.findIndex(t=>t.id===e);if(-1!=o){this.toasts.splice(o,1);let t=this.shadowRoot.querySelector("#toast-"+e);t&&(t.classList.add("fade-out"),t.addEventListener("animationend",()=>{t.remove()}))}}closeButton(t){return`<button class="close-btn" style="padding:4px;position:absolute;top:2px;right:2px;" type="button"  onclick="document.querySelector('htmx-toaster-component').removeToast('${t}')">&#10005;</button>`}renderToast(e){var{body:t,type:o}=this.toasts.find(t=>t.id===e);let s=document.createElement("div");s.id="toast-"+e,s.className="toast "+o,s.innerHTML=`
        <p>${t}</p>
        ${this.closeButton(e)}
      `,this.shadowRoot.querySelector(".toaster").appendChild(s),s.addEventListener("touchstart",t=>this.handleTouchStart(t,s),{passive:!0}),s.addEventListener("touchmove",t=>this.handleTouchMove(t),{passive:!0}),s.addEventListener("touchend",t=>this.handleTouchEnd(t,e),{passive:!0}),setTimeout(()=>this.removeToast(e),5e3)}connectedCallback(){var t=document.createElement("style");t.textContent=` ${this.generateTheme()}
    .toaster * {margin: 0;text-decoration: none;box-sizing: border-box;font-family: ui-sans-serif, system-ui, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;}
    .toaster {
      display: flex;
      flex-direction: column-reverse;
      justify-content: flex-end;
      align-items: flex-end;
      gap: 10px;
      position: fixed;
      z-index: 2147483647;
      inset: 2rem;
      user-select: none;
      pointer-events: none;
    }
    .toast a {color:var(--txt, #000);}
    .toast {
      position: relative;
      width: 100%;
      padding: 12px;
      padding-right: 16px;
      background-color: var(--bg, #f2f2f2);
      border: 1px solid rgb(228, 228, 231);
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      border-radius: 10px;
      font-size: 1rem;
      line-height: 1.5rem;
      z-index: 50;
      color: var(--txt, #000);
      text-align: left;
      animation: slideIn 0.3s  cubic-bezier( 0.645, 0.045, 0.355, 1 )   forwards;
      user-select: auto;
      pointer-events: auto;
    }
    .toast p {margin: 4px 0;}
    .success {background-color: var(--sc, #e2f9ec);}
    .info {background-color: var(--in, #e6f1fb);}
    .error {background-color: var(--er, #f8e3e3);}
    @media (min-width: 640px) {
      .toaster {inset: 3rem;}
      .toast {max-width: 350px;}
    }
    .fade-out {animation: fadeOut 0.3s  forwards;}
    .toast button {background-color: transparent;border: none;cursor: pointer;text-align: inherit;}
    @keyframes slideIn {from {transform: translateY(-20px) scale(0.9);opacity: 0;}to {transform: translateY(0) scale(1);opacity: 1;}}
    @keyframes fadeOut {from {opacity: 1;transform: scale(1);}to {opacity: 0;transform: scale(0.9);}}
    `,this.shadowRoot.appendChild(t)}handleTouchStart(t,e){this.touchStartX=t.changedTouches[0].screenX,this.currentToast=e,this.isDragging=!1}handleTouchMove(t){this.currentToast&&(this.touchEndX=t.changedTouches[0].screenX,t=this.touchEndX-this.touchStartX,Math.abs(t)>this.dragThreshold)&&(this.isDragging=!0,this.currentToast.style.transform=`translateX(${t}px)`)}handleTouchEnd(t,e){var o;this.currentToast&&(o=this.touchEndX-this.touchStartX,this.isDragging&&100<Math.abs(o)?this.removeToast(e):(this.currentToast.style.transform="",this.currentToast.style.transition="transform 0.3s ease",setTimeout(()=>{this.currentToast&&(this.currentToast.style.transition="")},300)),this.currentToast=null,this.touchStartX=0,this.touchEndX=0,this.isDragging=!1)}}function createToasterComponent(){var t=document.createElement("htmx-toaster-component");t.id="htmx-toaster",window.HTMXToaster=t,document.body.appendChild(t)}customElements&&!customElements.get("shopbox-results")&&customElements.define("htmx-toaster-component",ToasterComponent),window.addEventListener("DOMContentLoaded",()=>{createToasterComponent()}),htmx&&htmx.on("htmx:afterSettle",()=>{document.getElementById("htmx-toaster")||createToasterComponent()});